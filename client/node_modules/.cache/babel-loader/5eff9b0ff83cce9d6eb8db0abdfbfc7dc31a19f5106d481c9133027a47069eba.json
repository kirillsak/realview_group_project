{"ast":null,"code":"import { Observable } from \"../Misc/observable.js\";\nimport { Gamepad } from \"./gamepad.js\";\n/**\n * Defines supported buttons for DualShock compatible gamepads\n */\nexport var DualShockButton;\n(function (DualShockButton) {\n  /** Cross */\n  DualShockButton[DualShockButton[\"Cross\"] = 0] = \"Cross\";\n  /** Circle */\n  DualShockButton[DualShockButton[\"Circle\"] = 1] = \"Circle\";\n  /** Square */\n  DualShockButton[DualShockButton[\"Square\"] = 2] = \"Square\";\n  /** Triangle */\n  DualShockButton[DualShockButton[\"Triangle\"] = 3] = \"Triangle\";\n  /** L1 */\n  DualShockButton[DualShockButton[\"L1\"] = 4] = \"L1\";\n  /** R1 */\n  DualShockButton[DualShockButton[\"R1\"] = 5] = \"R1\";\n  /** Share */\n  DualShockButton[DualShockButton[\"Share\"] = 8] = \"Share\";\n  /** Options */\n  DualShockButton[DualShockButton[\"Options\"] = 9] = \"Options\";\n  /** Left stick */\n  DualShockButton[DualShockButton[\"LeftStick\"] = 10] = \"LeftStick\";\n  /** Right stick */\n  DualShockButton[DualShockButton[\"RightStick\"] = 11] = \"RightStick\";\n})(DualShockButton || (DualShockButton = {}));\n/** Defines values for DualShock DPad  */\nexport var DualShockDpad;\n(function (DualShockDpad) {\n  /** Up */\n  DualShockDpad[DualShockDpad[\"Up\"] = 12] = \"Up\";\n  /** Down */\n  DualShockDpad[DualShockDpad[\"Down\"] = 13] = \"Down\";\n  /** Left */\n  DualShockDpad[DualShockDpad[\"Left\"] = 14] = \"Left\";\n  /** Right */\n  DualShockDpad[DualShockDpad[\"Right\"] = 15] = \"Right\";\n})(DualShockDpad || (DualShockDpad = {}));\n/**\n * Defines a DualShock gamepad\n */\nexport class DualShockPad extends Gamepad {\n  /**\n   * Creates a new DualShock gamepad object\n   * @param id defines the id of this gamepad\n   * @param index defines its index\n   * @param gamepad defines the internal HTML gamepad object\n   */\n  constructor(id, index, gamepad) {\n    super(id.replace(\"STANDARD GAMEPAD\", \"SONY PLAYSTATION DUALSHOCK\"), index, gamepad, 0, 1, 2, 3);\n    this._leftTrigger = 0;\n    this._rightTrigger = 0;\n    /** Observable raised when a button is pressed */\n    this.onButtonDownObservable = new Observable();\n    /** Observable raised when a button is released */\n    this.onButtonUpObservable = new Observable();\n    /** Observable raised when a pad is pressed */\n    this.onPadDownObservable = new Observable();\n    /** Observable raised when a pad is released */\n    this.onPadUpObservable = new Observable();\n    this._buttonCross = 0;\n    this._buttonCircle = 0;\n    this._buttonSquare = 0;\n    this._buttonTriangle = 0;\n    this._buttonShare = 0;\n    this._buttonOptions = 0;\n    this._buttonL1 = 0;\n    this._buttonR1 = 0;\n    this._buttonLeftStick = 0;\n    this._buttonRightStick = 0;\n    this._dPadUp = 0;\n    this._dPadDown = 0;\n    this._dPadLeft = 0;\n    this._dPadRight = 0;\n    this.type = Gamepad.DUALSHOCK;\n  }\n  /**\n   * Defines the callback to call when left trigger is pressed\n   * @param callback defines the callback to use\n   */\n  onlefttriggerchanged(callback) {\n    this._onlefttriggerchanged = callback;\n  }\n  /**\n   * Defines the callback to call when right trigger is pressed\n   * @param callback defines the callback to use\n   */\n  onrighttriggerchanged(callback) {\n    this._onrighttriggerchanged = callback;\n  }\n  /**\n   * Gets the left trigger value\n   */\n  get leftTrigger() {\n    return this._leftTrigger;\n  }\n  /**\n   * Sets the left trigger value\n   */\n  set leftTrigger(newValue) {\n    if (this._onlefttriggerchanged && this._leftTrigger !== newValue) {\n      this._onlefttriggerchanged(newValue);\n    }\n    this._leftTrigger = newValue;\n  }\n  /**\n   * Gets the right trigger value\n   */\n  get rightTrigger() {\n    return this._rightTrigger;\n  }\n  /**\n   * Sets the right trigger value\n   */\n  set rightTrigger(newValue) {\n    if (this._onrighttriggerchanged && this._rightTrigger !== newValue) {\n      this._onrighttriggerchanged(newValue);\n    }\n    this._rightTrigger = newValue;\n  }\n  /**\n   * Defines the callback to call when a button is pressed\n   * @param callback defines the callback to use\n   */\n  onbuttondown(callback) {\n    this._onbuttondown = callback;\n  }\n  /**\n   * Defines the callback to call when a button is released\n   * @param callback defines the callback to use\n   */\n  onbuttonup(callback) {\n    this._onbuttonup = callback;\n  }\n  /**\n   * Defines the callback to call when a pad is pressed\n   * @param callback defines the callback to use\n   */\n  ondpaddown(callback) {\n    this._ondpaddown = callback;\n  }\n  /**\n   * Defines the callback to call when a pad is released\n   * @param callback defines the callback to use\n   */\n  ondpadup(callback) {\n    this._ondpadup = callback;\n  }\n  _setButtonValue(newValue, currentValue, buttonType) {\n    if (newValue !== currentValue) {\n      if (newValue === 1) {\n        if (this._onbuttondown) {\n          this._onbuttondown(buttonType);\n        }\n        this.onButtonDownObservable.notifyObservers(buttonType);\n      }\n      if (newValue === 0) {\n        if (this._onbuttonup) {\n          this._onbuttonup(buttonType);\n        }\n        this.onButtonUpObservable.notifyObservers(buttonType);\n      }\n    }\n    return newValue;\n  }\n  _setDPadValue(newValue, currentValue, buttonType) {\n    if (newValue !== currentValue) {\n      if (newValue === 1) {\n        if (this._ondpaddown) {\n          this._ondpaddown(buttonType);\n        }\n        this.onPadDownObservable.notifyObservers(buttonType);\n      }\n      if (newValue === 0) {\n        if (this._ondpadup) {\n          this._ondpadup(buttonType);\n        }\n        this.onPadUpObservable.notifyObservers(buttonType);\n      }\n    }\n    return newValue;\n  }\n  /**\n   * Gets the value of the `Cross` button\n   */\n  get buttonCross() {\n    return this._buttonCross;\n  }\n  /**\n   * Sets the value of the `Cross` button\n   */\n  set buttonCross(value) {\n    this._buttonCross = this._setButtonValue(value, this._buttonCross, DualShockButton.Cross);\n  }\n  /**\n   * Gets the value of the `Circle` button\n   */\n  get buttonCircle() {\n    return this._buttonCircle;\n  }\n  /**\n   * Sets the value of the `Circle` button\n   */\n  set buttonCircle(value) {\n    this._buttonCircle = this._setButtonValue(value, this._buttonCircle, DualShockButton.Circle);\n  }\n  /**\n   * Gets the value of the `Square` button\n   */\n  get buttonSquare() {\n    return this._buttonSquare;\n  }\n  /**\n   * Sets the value of the `Square` button\n   */\n  set buttonSquare(value) {\n    this._buttonSquare = this._setButtonValue(value, this._buttonSquare, DualShockButton.Square);\n  }\n  /**\n   * Gets the value of the `Triangle` button\n   */\n  get buttonTriangle() {\n    return this._buttonTriangle;\n  }\n  /**\n   * Sets the value of the `Triangle` button\n   */\n  set buttonTriangle(value) {\n    this._buttonTriangle = this._setButtonValue(value, this._buttonTriangle, DualShockButton.Triangle);\n  }\n  /**\n   * Gets the value of the `Options` button\n   */\n  get buttonOptions() {\n    return this._buttonOptions;\n  }\n  /**\n   * Sets the value of the `Options` button\n   */\n  set buttonOptions(value) {\n    this._buttonOptions = this._setButtonValue(value, this._buttonOptions, DualShockButton.Options);\n  }\n  /**\n   * Gets the value of the `Share` button\n   */\n  get buttonShare() {\n    return this._buttonShare;\n  }\n  /**\n   * Sets the value of the `Share` button\n   */\n  set buttonShare(value) {\n    this._buttonShare = this._setButtonValue(value, this._buttonShare, DualShockButton.Share);\n  }\n  /**\n   * Gets the value of the `L1` button\n   */\n  get buttonL1() {\n    return this._buttonL1;\n  }\n  /**\n   * Sets the value of the `L1` button\n   */\n  set buttonL1(value) {\n    this._buttonL1 = this._setButtonValue(value, this._buttonL1, DualShockButton.L1);\n  }\n  /**\n   * Gets the value of the `R1` button\n   */\n  get buttonR1() {\n    return this._buttonR1;\n  }\n  /**\n   * Sets the value of the `R1` button\n   */\n  set buttonR1(value) {\n    this._buttonR1 = this._setButtonValue(value, this._buttonR1, DualShockButton.R1);\n  }\n  /**\n   * Gets the value of the Left joystick\n   */\n  get buttonLeftStick() {\n    return this._buttonLeftStick;\n  }\n  /**\n   * Sets the value of the Left joystick\n   */\n  set buttonLeftStick(value) {\n    this._buttonLeftStick = this._setButtonValue(value, this._buttonLeftStick, DualShockButton.LeftStick);\n  }\n  /**\n   * Gets the value of the Right joystick\n   */\n  get buttonRightStick() {\n    return this._buttonRightStick;\n  }\n  /**\n   * Sets the value of the Right joystick\n   */\n  set buttonRightStick(value) {\n    this._buttonRightStick = this._setButtonValue(value, this._buttonRightStick, DualShockButton.RightStick);\n  }\n  /**\n   * Gets the value of D-pad up\n   */\n  get dPadUp() {\n    return this._dPadUp;\n  }\n  /**\n   * Sets the value of D-pad up\n   */\n  set dPadUp(value) {\n    this._dPadUp = this._setDPadValue(value, this._dPadUp, DualShockDpad.Up);\n  }\n  /**\n   * Gets the value of D-pad down\n   */\n  get dPadDown() {\n    return this._dPadDown;\n  }\n  /**\n   * Sets the value of D-pad down\n   */\n  set dPadDown(value) {\n    this._dPadDown = this._setDPadValue(value, this._dPadDown, DualShockDpad.Down);\n  }\n  /**\n   * Gets the value of D-pad left\n   */\n  get dPadLeft() {\n    return this._dPadLeft;\n  }\n  /**\n   * Sets the value of D-pad left\n   */\n  set dPadLeft(value) {\n    this._dPadLeft = this._setDPadValue(value, this._dPadLeft, DualShockDpad.Left);\n  }\n  /**\n   * Gets the value of D-pad right\n   */\n  get dPadRight() {\n    return this._dPadRight;\n  }\n  /**\n   * Sets the value of D-pad right\n   */\n  set dPadRight(value) {\n    this._dPadRight = this._setDPadValue(value, this._dPadRight, DualShockDpad.Right);\n  }\n  /**\n   * Force the gamepad to synchronize with device values\n   */\n  update() {\n    super.update();\n    this.buttonCross = this.browserGamepad.buttons[0].value;\n    this.buttonCircle = this.browserGamepad.buttons[1].value;\n    this.buttonSquare = this.browserGamepad.buttons[2].value;\n    this.buttonTriangle = this.browserGamepad.buttons[3].value;\n    this.buttonL1 = this.browserGamepad.buttons[4].value;\n    this.buttonR1 = this.browserGamepad.buttons[5].value;\n    this.leftTrigger = this.browserGamepad.buttons[6].value;\n    this.rightTrigger = this.browserGamepad.buttons[7].value;\n    this.buttonShare = this.browserGamepad.buttons[8].value;\n    this.buttonOptions = this.browserGamepad.buttons[9].value;\n    this.buttonLeftStick = this.browserGamepad.buttons[10].value;\n    this.buttonRightStick = this.browserGamepad.buttons[11].value;\n    this.dPadUp = this.browserGamepad.buttons[12].value;\n    this.dPadDown = this.browserGamepad.buttons[13].value;\n    this.dPadLeft = this.browserGamepad.buttons[14].value;\n    this.dPadRight = this.browserGamepad.buttons[15].value;\n  }\n  /**\n   * Disposes the gamepad\n   */\n  dispose() {\n    super.dispose();\n    this.onButtonDownObservable.clear();\n    this.onButtonUpObservable.clear();\n    this.onPadDownObservable.clear();\n    this.onPadUpObservable.clear();\n  }\n}","map":{"version":3,"mappings":"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","names":["Observable","Gamepad","DualShockButton","DualShockDpad","DualShockPad","constructor","id","index","gamepad","replace","type","DUALSHOCK","onlefttriggerchanged","callback","_onlefttriggerchanged","onrighttriggerchanged","_onrighttriggerchanged","leftTrigger","_leftTrigger","newValue","rightTrigger","_rightTrigger","onbuttondown","_onbuttondown","onbuttonup","_onbuttonup","ondpaddown","_ondpaddown","ondpadup","_ondpadup","_setButtonValue","currentValue","buttonType","onButtonDownObservable","notifyObservers","onButtonUpObservable","_setDPadValue","onPadDownObservable","onPadUpObservable","buttonCross","_buttonCross","value","Cross","buttonCircle","_buttonCircle","Circle","buttonSquare","_buttonSquare","Square","buttonTriangle","_buttonTriangle","Triangle","buttonOptions","_buttonOptions","Options","buttonShare","_buttonShare","Share","buttonL1","_buttonL1","L1","buttonR1","_buttonR1","R1","buttonLeftStick","_buttonLeftStick","LeftStick","buttonRightStick","_buttonRightStick","RightStick","dPadUp","_dPadUp","Up","dPadDown","_dPadDown","Down","dPadLeft","_dPadLeft","Left","dPadRight","_dPadRight","Right","update","browserGamepad","buttons","dispose","clear"],"sourceRoot":"","sources":["../../../../lts/core/generated/Gamepads/dualShockGamepad.ts"],"sourcesContent":["import { Observable } from \"../Misc/observable\";\r\nimport { Gamepad } from \"./gamepad\";\r\n\r\n/**\r\n * Defines supported buttons for DualShock compatible gamepads\r\n */\r\nexport enum DualShockButton {\r\n    /** Cross */\r\n    Cross = 0,\r\n    /** Circle */\r\n    Circle = 1,\r\n    /** Square */\r\n    Square = 2,\r\n    /** Triangle */\r\n    Triangle = 3,\r\n    /** L1 */\r\n    L1 = 4,\r\n    /** R1 */\r\n    R1 = 5,\r\n    /** Share */\r\n    Share = 8,\r\n    /** Options */\r\n    Options = 9,\r\n    /** Left stick */\r\n    LeftStick = 10,\r\n    /** Right stick */\r\n    RightStick = 11,\r\n}\r\n\r\n/** Defines values for DualShock DPad  */\r\nexport enum DualShockDpad {\r\n    /** Up */\r\n    Up = 12,\r\n    /** Down */\r\n    Down = 13,\r\n    /** Left */\r\n    Left = 14,\r\n    /** Right */\r\n    Right = 15,\r\n}\r\n\r\n/**\r\n * Defines a DualShock gamepad\r\n */\r\nexport class DualShockPad extends Gamepad {\r\n    private _leftTrigger: number = 0;\r\n    private _rightTrigger: number = 0;\r\n\r\n    private _onlefttriggerchanged: (value: number) => void;\r\n    private _onrighttriggerchanged: (value: number) => void;\r\n\r\n    private _onbuttondown: (buttonPressed: DualShockButton) => void;\r\n    private _onbuttonup: (buttonReleased: DualShockButton) => void;\r\n    private _ondpaddown: (dPadPressed: DualShockDpad) => void;\r\n    private _ondpadup: (dPadReleased: DualShockDpad) => void;\r\n\r\n    /** Observable raised when a button is pressed */\r\n    public onButtonDownObservable = new Observable<DualShockButton>();\r\n    /** Observable raised when a button is released */\r\n    public onButtonUpObservable = new Observable<DualShockButton>();\r\n    /** Observable raised when a pad is pressed */\r\n    public onPadDownObservable = new Observable<DualShockDpad>();\r\n    /** Observable raised when a pad is released */\r\n    public onPadUpObservable = new Observable<DualShockDpad>();\r\n\r\n    private _buttonCross: number = 0;\r\n    private _buttonCircle: number = 0;\r\n    private _buttonSquare: number = 0;\r\n    private _buttonTriangle: number = 0;\r\n    private _buttonShare: number = 0;\r\n    private _buttonOptions: number = 0;\r\n    private _buttonL1: number = 0;\r\n    private _buttonR1: number = 0;\r\n\r\n    private _buttonLeftStick: number = 0;\r\n    private _buttonRightStick: number = 0;\r\n    private _dPadUp: number = 0;\r\n    private _dPadDown: number = 0;\r\n    private _dPadLeft: number = 0;\r\n    private _dPadRight: number = 0;\r\n\r\n    /**\r\n     * Creates a new DualShock gamepad object\r\n     * @param id defines the id of this gamepad\r\n     * @param index defines its index\r\n     * @param gamepad defines the internal HTML gamepad object\r\n     */\r\n    constructor(id: string, index: number, gamepad: any) {\r\n        super(id.replace(\"STANDARD GAMEPAD\", \"SONY PLAYSTATION DUALSHOCK\"), index, gamepad, 0, 1, 2, 3);\r\n        this.type = Gamepad.DUALSHOCK;\r\n    }\r\n\r\n    /**\r\n     * Defines the callback to call when left trigger is pressed\r\n     * @param callback defines the callback to use\r\n     */\r\n    public onlefttriggerchanged(callback: (value: number) => void) {\r\n        this._onlefttriggerchanged = callback;\r\n    }\r\n\r\n    /**\r\n     * Defines the callback to call when right trigger is pressed\r\n     * @param callback defines the callback to use\r\n     */\r\n    public onrighttriggerchanged(callback: (value: number) => void) {\r\n        this._onrighttriggerchanged = callback;\r\n    }\r\n\r\n    /**\r\n     * Gets the left trigger value\r\n     */\r\n    public get leftTrigger(): number {\r\n        return this._leftTrigger;\r\n    }\r\n    /**\r\n     * Sets the left trigger value\r\n     */\r\n    public set leftTrigger(newValue: number) {\r\n        if (this._onlefttriggerchanged && this._leftTrigger !== newValue) {\r\n            this._onlefttriggerchanged(newValue);\r\n        }\r\n        this._leftTrigger = newValue;\r\n    }\r\n\r\n    /**\r\n     * Gets the right trigger value\r\n     */\r\n    public get rightTrigger(): number {\r\n        return this._rightTrigger;\r\n    }\r\n    /**\r\n     * Sets the right trigger value\r\n     */\r\n    public set rightTrigger(newValue: number) {\r\n        if (this._onrighttriggerchanged && this._rightTrigger !== newValue) {\r\n            this._onrighttriggerchanged(newValue);\r\n        }\r\n        this._rightTrigger = newValue;\r\n    }\r\n\r\n    /**\r\n     * Defines the callback to call when a button is pressed\r\n     * @param callback defines the callback to use\r\n     */\r\n    public onbuttondown(callback: (buttonPressed: DualShockButton) => void) {\r\n        this._onbuttondown = callback;\r\n    }\r\n\r\n    /**\r\n     * Defines the callback to call when a button is released\r\n     * @param callback defines the callback to use\r\n     */\r\n    public onbuttonup(callback: (buttonReleased: DualShockButton) => void) {\r\n        this._onbuttonup = callback;\r\n    }\r\n\r\n    /**\r\n     * Defines the callback to call when a pad is pressed\r\n     * @param callback defines the callback to use\r\n     */\r\n    public ondpaddown(callback: (dPadPressed: DualShockDpad) => void) {\r\n        this._ondpaddown = callback;\r\n    }\r\n\r\n    /**\r\n     * Defines the callback to call when a pad is released\r\n     * @param callback defines the callback to use\r\n     */\r\n    public ondpadup(callback: (dPadReleased: DualShockDpad) => void) {\r\n        this._ondpadup = callback;\r\n    }\r\n\r\n    private _setButtonValue(newValue: number, currentValue: number, buttonType: DualShockButton): number {\r\n        if (newValue !== currentValue) {\r\n            if (newValue === 1) {\r\n                if (this._onbuttondown) {\r\n                    this._onbuttondown(buttonType);\r\n                }\r\n\r\n                this.onButtonDownObservable.notifyObservers(buttonType);\r\n            }\r\n            if (newValue === 0) {\r\n                if (this._onbuttonup) {\r\n                    this._onbuttonup(buttonType);\r\n                }\r\n\r\n                this.onButtonUpObservable.notifyObservers(buttonType);\r\n            }\r\n        }\r\n        return newValue;\r\n    }\r\n\r\n    private _setDPadValue(newValue: number, currentValue: number, buttonType: DualShockDpad): number {\r\n        if (newValue !== currentValue) {\r\n            if (newValue === 1) {\r\n                if (this._ondpaddown) {\r\n                    this._ondpaddown(buttonType);\r\n                }\r\n\r\n                this.onPadDownObservable.notifyObservers(buttonType);\r\n            }\r\n            if (newValue === 0) {\r\n                if (this._ondpadup) {\r\n                    this._ondpadup(buttonType);\r\n                }\r\n\r\n                this.onPadUpObservable.notifyObservers(buttonType);\r\n            }\r\n        }\r\n        return newValue;\r\n    }\r\n\r\n    /**\r\n     * Gets the value of the `Cross` button\r\n     */\r\n    public get buttonCross(): number {\r\n        return this._buttonCross;\r\n    }\r\n    /**\r\n     * Sets the value of the `Cross` button\r\n     */\r\n    public set buttonCross(value) {\r\n        this._buttonCross = this._setButtonValue(value, this._buttonCross, DualShockButton.Cross);\r\n    }\r\n\r\n    /**\r\n     * Gets the value of the `Circle` button\r\n     */\r\n    public get buttonCircle(): number {\r\n        return this._buttonCircle;\r\n    }\r\n    /**\r\n     * Sets the value of the `Circle` button\r\n     */\r\n    public set buttonCircle(value) {\r\n        this._buttonCircle = this._setButtonValue(value, this._buttonCircle, DualShockButton.Circle);\r\n    }\r\n\r\n    /**\r\n     * Gets the value of the `Square` button\r\n     */\r\n    public get buttonSquare(): number {\r\n        return this._buttonSquare;\r\n    }\r\n    /**\r\n     * Sets the value of the `Square` button\r\n     */\r\n    public set buttonSquare(value) {\r\n        this._buttonSquare = this._setButtonValue(value, this._buttonSquare, DualShockButton.Square);\r\n    }\r\n\r\n    /**\r\n     * Gets the value of the `Triangle` button\r\n     */\r\n    public get buttonTriangle(): number {\r\n        return this._buttonTriangle;\r\n    }\r\n    /**\r\n     * Sets the value of the `Triangle` button\r\n     */\r\n    public set buttonTriangle(value) {\r\n        this._buttonTriangle = this._setButtonValue(value, this._buttonTriangle, DualShockButton.Triangle);\r\n    }\r\n\r\n    /**\r\n     * Gets the value of the `Options` button\r\n     */\r\n    public get buttonOptions(): number {\r\n        return this._buttonOptions;\r\n    }\r\n    /**\r\n     * Sets the value of the `Options` button\r\n     */\r\n    public set buttonOptions(value) {\r\n        this._buttonOptions = this._setButtonValue(value, this._buttonOptions, DualShockButton.Options);\r\n    }\r\n\r\n    /**\r\n     * Gets the value of the `Share` button\r\n     */\r\n    public get buttonShare(): number {\r\n        return this._buttonShare;\r\n    }\r\n    /**\r\n     * Sets the value of the `Share` button\r\n     */\r\n    public set buttonShare(value) {\r\n        this._buttonShare = this._setButtonValue(value, this._buttonShare, DualShockButton.Share);\r\n    }\r\n\r\n    /**\r\n     * Gets the value of the `L1` button\r\n     */\r\n    public get buttonL1(): number {\r\n        return this._buttonL1;\r\n    }\r\n    /**\r\n     * Sets the value of the `L1` button\r\n     */\r\n    public set buttonL1(value) {\r\n        this._buttonL1 = this._setButtonValue(value, this._buttonL1, DualShockButton.L1);\r\n    }\r\n\r\n    /**\r\n     * Gets the value of the `R1` button\r\n     */\r\n    public get buttonR1(): number {\r\n        return this._buttonR1;\r\n    }\r\n    /**\r\n     * Sets the value of the `R1` button\r\n     */\r\n    public set buttonR1(value) {\r\n        this._buttonR1 = this._setButtonValue(value, this._buttonR1, DualShockButton.R1);\r\n    }\r\n\r\n    /**\r\n     * Gets the value of the Left joystick\r\n     */\r\n    public get buttonLeftStick(): number {\r\n        return this._buttonLeftStick;\r\n    }\r\n    /**\r\n     * Sets the value of the Left joystick\r\n     */\r\n    public set buttonLeftStick(value) {\r\n        this._buttonLeftStick = this._setButtonValue(value, this._buttonLeftStick, DualShockButton.LeftStick);\r\n    }\r\n\r\n    /**\r\n     * Gets the value of the Right joystick\r\n     */\r\n    public get buttonRightStick(): number {\r\n        return this._buttonRightStick;\r\n    }\r\n    /**\r\n     * Sets the value of the Right joystick\r\n     */\r\n    public set buttonRightStick(value) {\r\n        this._buttonRightStick = this._setButtonValue(value, this._buttonRightStick, DualShockButton.RightStick);\r\n    }\r\n\r\n    /**\r\n     * Gets the value of D-pad up\r\n     */\r\n    public get dPadUp(): number {\r\n        return this._dPadUp;\r\n    }\r\n    /**\r\n     * Sets the value of D-pad up\r\n     */\r\n    public set dPadUp(value) {\r\n        this._dPadUp = this._setDPadValue(value, this._dPadUp, DualShockDpad.Up);\r\n    }\r\n\r\n    /**\r\n     * Gets the value of D-pad down\r\n     */\r\n    public get dPadDown(): number {\r\n        return this._dPadDown;\r\n    }\r\n    /**\r\n     * Sets the value of D-pad down\r\n     */\r\n    public set dPadDown(value) {\r\n        this._dPadDown = this._setDPadValue(value, this._dPadDown, DualShockDpad.Down);\r\n    }\r\n\r\n    /**\r\n     * Gets the value of D-pad left\r\n     */\r\n    public get dPadLeft(): number {\r\n        return this._dPadLeft;\r\n    }\r\n    /**\r\n     * Sets the value of D-pad left\r\n     */\r\n    public set dPadLeft(value) {\r\n        this._dPadLeft = this._setDPadValue(value, this._dPadLeft, DualShockDpad.Left);\r\n    }\r\n\r\n    /**\r\n     * Gets the value of D-pad right\r\n     */\r\n    public get dPadRight(): number {\r\n        return this._dPadRight;\r\n    }\r\n    /**\r\n     * Sets the value of D-pad right\r\n     */\r\n    public set dPadRight(value) {\r\n        this._dPadRight = this._setDPadValue(value, this._dPadRight, DualShockDpad.Right);\r\n    }\r\n\r\n    /**\r\n     * Force the gamepad to synchronize with device values\r\n     */\r\n    public update() {\r\n        super.update();\r\n        this.buttonCross = this.browserGamepad.buttons[0].value;\r\n        this.buttonCircle = this.browserGamepad.buttons[1].value;\r\n        this.buttonSquare = this.browserGamepad.buttons[2].value;\r\n        this.buttonTriangle = this.browserGamepad.buttons[3].value;\r\n        this.buttonL1 = this.browserGamepad.buttons[4].value;\r\n        this.buttonR1 = this.browserGamepad.buttons[5].value;\r\n        this.leftTrigger = this.browserGamepad.buttons[6].value;\r\n        this.rightTrigger = this.browserGamepad.buttons[7].value;\r\n        this.buttonShare = this.browserGamepad.buttons[8].value;\r\n        this.buttonOptions = this.browserGamepad.buttons[9].value;\r\n        this.buttonLeftStick = this.browserGamepad.buttons[10].value;\r\n        this.buttonRightStick = this.browserGamepad.buttons[11].value;\r\n        this.dPadUp = this.browserGamepad.buttons[12].value;\r\n        this.dPadDown = this.browserGamepad.buttons[13].value;\r\n        this.dPadLeft = this.browserGamepad.buttons[14].value;\r\n        this.dPadRight = this.browserGamepad.buttons[15].value;\r\n    }\r\n\r\n    /**\r\n     * Disposes the gamepad\r\n     */\r\n    public dispose() {\r\n        super.dispose();\r\n        this.onButtonDownObservable.clear();\r\n        this.onButtonUpObservable.clear();\r\n        this.onPadDownObservable.clear();\r\n        this.onPadUpObservable.clear();\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}