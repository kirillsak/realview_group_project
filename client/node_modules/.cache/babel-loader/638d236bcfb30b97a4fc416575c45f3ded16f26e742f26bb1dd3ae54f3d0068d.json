{"ast":null,"code":"import { __decorate } from \"../../../../tslib.es6.js\";\nimport { NodeMaterialBlock } from \"../../nodeMaterialBlock.js\";\nimport { NodeMaterialBlockConnectionPointTypes } from \"../../Enums/nodeMaterialBlockConnectionPointTypes.js\";\nimport { NodeMaterialBlockTargets } from \"../../Enums/nodeMaterialBlockTargets.js\";\nimport { RegisterClass } from \"../../../../Misc/typeStore.js\";\nimport { editableInPropertyPage, PropertyTypeForEdition } from \"../../nodeMaterialDecorator.js\";\n/**\n * Block used to convert a height vector to a normal\n */\nexport class HeightToNormalBlock extends NodeMaterialBlock {\n  /**\n   * Creates a new HeightToNormalBlock\n   * @param name defines the block name\n   */\n  constructor(name) {\n    super(name, NodeMaterialBlockTargets.Fragment);\n    /**\n     * Defines if the output should be generated in world or tangent space.\n     * Note that in tangent space the result is also scaled by 0.5 and offsetted by 0.5 so that it can directly be used as a PerturbNormal.normalMapColor input\n     */\n    this.generateInWorldSpace = false;\n    /**\n     * Defines that the worldNormal input will be normalized by the HeightToNormal block before being used\n     */\n    this.automaticNormalizationNormal = true;\n    /**\n     * Defines that the worldTangent input will be normalized by the HeightToNormal block before being used\n     */\n    this.automaticNormalizationTangent = true;\n    this.registerInput(\"input\", NodeMaterialBlockConnectionPointTypes.Float);\n    this.registerInput(\"worldPosition\", NodeMaterialBlockConnectionPointTypes.Vector3);\n    this.registerInput(\"worldNormal\", NodeMaterialBlockConnectionPointTypes.Vector3);\n    this.registerInput(\"worldTangent\", NodeMaterialBlockConnectionPointTypes.AutoDetect, true);\n    this.registerOutput(\"output\", NodeMaterialBlockConnectionPointTypes.Vector4);\n    this.registerOutput(\"xyz\", NodeMaterialBlockConnectionPointTypes.Vector3);\n    this._inputs[3].addExcludedConnectionPointFromAllowedTypes(NodeMaterialBlockConnectionPointTypes.Color3 | NodeMaterialBlockConnectionPointTypes.Vector3 | NodeMaterialBlockConnectionPointTypes.Vector4);\n  }\n  /**\n   * Gets the current class name\n   * @returns the class name\n   */\n  getClassName() {\n    return \"HeightToNormalBlock\";\n  }\n  /**\n   * Gets the input component\n   */\n  get input() {\n    return this._inputs[0];\n  }\n  /**\n   * Gets the position component\n   */\n  get worldPosition() {\n    return this._inputs[1];\n  }\n  /**\n   * Gets the normal component\n   */\n  get worldNormal() {\n    return this._inputs[2];\n  }\n  /**\n   * Gets the tangent component\n   */\n  get worldTangent() {\n    return this._inputs[3];\n  }\n  /**\n   * Gets the output component\n   */\n  get output() {\n    return this._outputs[0];\n  }\n  /**\n   * Gets the xyz component\n   */\n  get xyz() {\n    return this._outputs[1];\n  }\n  _buildBlock(state) {\n    super._buildBlock(state);\n    const output = this._outputs[0];\n    if (!this.generateInWorldSpace && !this.worldTangent.isConnected) {\n      console.error(`You must connect the 'worldTangent' input of the ${this.name} block!`);\n    }\n    const startCode = this.generateInWorldSpace ? \"\" : `\n            vec3 biTangent = cross(normal, tangent);\n            mat3 TBN = mat3(tangent, biTangent, normal);\n            `;\n    const endCode = this.generateInWorldSpace ? \"\" : `\n            result = TBN * result;\n            result = result * vec3(0.5) + vec3(0.5);\n            `;\n    const heightToNormal = `\n            vec4 heightToNormal(in float height, in vec3 position, in vec3 tangent, in vec3 normal) {\n                ${startCode}\n                ${this.automaticNormalizationTangent ? \"tangent = normalize(tangent);\" : \"\"}\n                ${this.automaticNormalizationNormal ? \"normal = normalize(normal);\" : \"\"}\n                vec3 worlddX = dFdx(position);\n                vec3 worlddY = dFdy(position);\n                vec3 crossX = cross(normal, worlddX);\n                vec3 crossY = cross(normal, worlddY);\n                float d = abs(dot(crossY, worlddX));\n                vec3 inToNormal = vec3(((((height + dFdx(height)) - height) * crossY) + (((height + dFdy(height)) - height) * crossX)) * sign(d));\n                inToNormal.y *= -1.0;\n                vec3 result = normalize((d * normal) - inToNormal);\n                ${endCode}\n                return vec4(result, 0.);\n            }`;\n    state._emitExtension(\"derivatives\", \"#extension GL_OES_standard_derivatives : enable\");\n    state._emitFunction(\"heightToNormal\", heightToNormal, \"// heightToNormal\");\n    state.compilationString += this._declareOutput(output, state) + ` = heightToNormal(${this.input.associatedVariableName}, ${this.worldPosition.associatedVariableName}, ${this.worldTangent.isConnected ? this.worldTangent.associatedVariableName : \"vec3(0.)\"}.xyz, ${this.worldNormal.associatedVariableName});\\r\\n`;\n    if (this.xyz.hasEndpoints) {\n      state.compilationString += this._declareOutput(this.xyz, state) + ` = ${this.output.associatedVariableName}.xyz;\\r\\n`;\n    }\n    return this;\n  }\n  _dumpPropertiesCode() {\n    let codeString = super._dumpPropertiesCode();\n    codeString += `${this._codeVariableName}.generateInWorldSpace = ${this.generateInWorldSpace};\\r\\n`;\n    codeString += `${this._codeVariableName}.automaticNormalizationNormal = ${this.automaticNormalizationNormal};\\r\\n`;\n    codeString += `${this._codeVariableName}.automaticNormalizationTangent = ${this.automaticNormalizationTangent};\\r\\n`;\n    return codeString;\n  }\n  serialize() {\n    const serializationObject = super.serialize();\n    serializationObject.generateInWorldSpace = this.generateInWorldSpace;\n    serializationObject.automaticNormalizationNormal = this.automaticNormalizationNormal;\n    serializationObject.automaticNormalizationTangent = this.automaticNormalizationTangent;\n    return serializationObject;\n  }\n  _deserialize(serializationObject, scene, rootUrl) {\n    super._deserialize(serializationObject, scene, rootUrl);\n    this.generateInWorldSpace = serializationObject.generateInWorldSpace;\n    this.automaticNormalizationNormal = serializationObject.automaticNormalizationNormal;\n    this.automaticNormalizationTangent = serializationObject.automaticNormalizationTangent;\n  }\n}\n__decorate([editableInPropertyPage(\"Generate in world space instead of tangent space\", PropertyTypeForEdition.Boolean, \"PROPERTIES\", {\n  notifiers: {\n    update: true\n  }\n})], HeightToNormalBlock.prototype, \"generateInWorldSpace\", void 0);\n__decorate([editableInPropertyPage(\"Force normalization for the worldNormal input\", PropertyTypeForEdition.Boolean, \"PROPERTIES\", {\n  notifiers: {\n    update: true\n  }\n})], HeightToNormalBlock.prototype, \"automaticNormalizationNormal\", void 0);\n__decorate([editableInPropertyPage(\"Force normalization for the worldTangent input\", PropertyTypeForEdition.Boolean, \"PROPERTIES\", {\n  notifiers: {\n    update: true\n  }\n})], HeightToNormalBlock.prototype, \"automaticNormalizationTangent\", void 0);\nRegisterClass(\"BABYLON.HeightToNormalBlock\", HeightToNormalBlock);","map":{"version":3,"mappings":"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","names":["NodeMaterialBlock","NodeMaterialBlockConnectionPointTypes","NodeMaterialBlockTargets","RegisterClass","editableInPropertyPage","PropertyTypeForEdition","HeightToNormalBlock","constructor","name","Fragment","registerInput","Float","Vector3","AutoDetect","registerOutput","Vector4","_inputs","addExcludedConnectionPointFromAllowedTypes","Color3","getClassName","input","worldPosition","worldNormal","worldTangent","output","_outputs","xyz","_buildBlock","state","generateInWorldSpace","isConnected","console","error","startCode","endCode","heightToNormal","automaticNormalizationTangent","automaticNormalizationNormal","_emitExtension","_emitFunction","compilationString","_declareOutput","associatedVariableName","hasEndpoints","_dumpPropertiesCode","codeString","_codeVariableName","serialize","serializationObject","_deserialize","scene","rootUrl","__decorate","Boolean","notifiers","update"],"sourceRoot":"","sources":["../../../../../../../lts/core/generated/Materials/Node/Blocks/Fragment/heightToNormalBlock.ts"],"sourcesContent":["import { NodeMaterialBlock } from \"../../nodeMaterialBlock\";\r\nimport { NodeMaterialBlockConnectionPointTypes } from \"../../Enums/nodeMaterialBlockConnectionPointTypes\";\r\nimport type { NodeMaterialBuildState } from \"../../nodeMaterialBuildState\";\r\nimport type { NodeMaterialConnectionPoint } from \"../../nodeMaterialBlockConnectionPoint\";\r\nimport { NodeMaterialBlockTargets } from \"../../Enums/nodeMaterialBlockTargets\";\r\nimport { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { editableInPropertyPage, PropertyTypeForEdition } from \"../../nodeMaterialDecorator\";\r\nimport type { Scene } from \"../../../../scene\";\r\n\r\n/**\r\n * Block used to convert a height vector to a normal\r\n */\r\nexport class HeightToNormalBlock extends NodeMaterialBlock {\r\n    /**\r\n     * Creates a new HeightToNormalBlock\r\n     * @param name defines the block name\r\n     */\r\n    public constructor(name: string) {\r\n        super(name, NodeMaterialBlockTargets.Fragment);\r\n\r\n        this.registerInput(\"input\", NodeMaterialBlockConnectionPointTypes.Float);\r\n        this.registerInput(\"worldPosition\", NodeMaterialBlockConnectionPointTypes.Vector3);\r\n        this.registerInput(\"worldNormal\", NodeMaterialBlockConnectionPointTypes.Vector3);\r\n        this.registerInput(\"worldTangent\", NodeMaterialBlockConnectionPointTypes.AutoDetect, true);\r\n        this.registerOutput(\"output\", NodeMaterialBlockConnectionPointTypes.Vector4);\r\n        this.registerOutput(\"xyz\", NodeMaterialBlockConnectionPointTypes.Vector3);\r\n\r\n        this._inputs[3].addExcludedConnectionPointFromAllowedTypes(\r\n            NodeMaterialBlockConnectionPointTypes.Color3 | NodeMaterialBlockConnectionPointTypes.Vector3 | NodeMaterialBlockConnectionPointTypes.Vector4\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Defines if the output should be generated in world or tangent space.\r\n     * Note that in tangent space the result is also scaled by 0.5 and offsetted by 0.5 so that it can directly be used as a PerturbNormal.normalMapColor input\r\n     */\r\n    @editableInPropertyPage(\"Generate in world space instead of tangent space\", PropertyTypeForEdition.Boolean, \"PROPERTIES\", { notifiers: { update: true } })\r\n    public generateInWorldSpace: boolean = false;\r\n\r\n    /**\r\n     * Defines that the worldNormal input will be normalized by the HeightToNormal block before being used\r\n     */\r\n    @editableInPropertyPage(\"Force normalization for the worldNormal input\", PropertyTypeForEdition.Boolean, \"PROPERTIES\", { notifiers: { update: true } })\r\n    public automaticNormalizationNormal: boolean = true;\r\n\r\n    /**\r\n     * Defines that the worldTangent input will be normalized by the HeightToNormal block before being used\r\n     */\r\n    @editableInPropertyPage(\"Force normalization for the worldTangent input\", PropertyTypeForEdition.Boolean, \"PROPERTIES\", { notifiers: { update: true } })\r\n    public automaticNormalizationTangent: boolean = true;\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public getClassName() {\r\n        return \"HeightToNormalBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the input component\r\n     */\r\n    public get input(): NodeMaterialConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the position component\r\n     */\r\n    public get worldPosition(): NodeMaterialConnectionPoint {\r\n        return this._inputs[1];\r\n    }\r\n\r\n    /**\r\n     * Gets the normal component\r\n     */\r\n    public get worldNormal(): NodeMaterialConnectionPoint {\r\n        return this._inputs[2];\r\n    }\r\n\r\n    /**\r\n     * Gets the tangent component\r\n     */\r\n    public get worldTangent(): NodeMaterialConnectionPoint {\r\n        return this._inputs[3];\r\n    }\r\n\r\n    /**\r\n     * Gets the output component\r\n     */\r\n    public get output(): NodeMaterialConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the xyz component\r\n     */\r\n    public get xyz(): NodeMaterialConnectionPoint {\r\n        return this._outputs[1];\r\n    }\r\n\r\n    protected _buildBlock(state: NodeMaterialBuildState) {\r\n        super._buildBlock(state);\r\n\r\n        const output = this._outputs[0];\r\n\r\n        if (!this.generateInWorldSpace && !this.worldTangent.isConnected) {\r\n            console.error(`You must connect the 'worldTangent' input of the ${this.name} block!`);\r\n        }\r\n\r\n        const startCode = this.generateInWorldSpace\r\n            ? \"\"\r\n            : `\r\n            vec3 biTangent = cross(normal, tangent);\r\n            mat3 TBN = mat3(tangent, biTangent, normal);\r\n            `;\r\n\r\n        const endCode = this.generateInWorldSpace\r\n            ? \"\"\r\n            : `\r\n            result = TBN * result;\r\n            result = result * vec3(0.5) + vec3(0.5);\r\n            `;\r\n\r\n        const heightToNormal = `\r\n            vec4 heightToNormal(in float height, in vec3 position, in vec3 tangent, in vec3 normal) {\r\n                ${startCode}\r\n                ${this.automaticNormalizationTangent ? \"tangent = normalize(tangent);\" : \"\"}\r\n                ${this.automaticNormalizationNormal ? \"normal = normalize(normal);\" : \"\"}\r\n                vec3 worlddX = dFdx(position);\r\n                vec3 worlddY = dFdy(position);\r\n                vec3 crossX = cross(normal, worlddX);\r\n                vec3 crossY = cross(normal, worlddY);\r\n                float d = abs(dot(crossY, worlddX));\r\n                vec3 inToNormal = vec3(((((height + dFdx(height)) - height) * crossY) + (((height + dFdy(height)) - height) * crossX)) * sign(d));\r\n                inToNormal.y *= -1.0;\r\n                vec3 result = normalize((d * normal) - inToNormal);\r\n                ${endCode}\r\n                return vec4(result, 0.);\r\n            }`;\r\n\r\n        state._emitExtension(\"derivatives\", \"#extension GL_OES_standard_derivatives : enable\");\r\n        state._emitFunction(\"heightToNormal\", heightToNormal, \"// heightToNormal\");\r\n        state.compilationString +=\r\n            this._declareOutput(output, state) +\r\n            ` = heightToNormal(${this.input.associatedVariableName}, ${this.worldPosition.associatedVariableName}, ${\r\n                this.worldTangent.isConnected ? this.worldTangent.associatedVariableName : \"vec3(0.)\"\r\n            }.xyz, ${this.worldNormal.associatedVariableName});\\r\\n`;\r\n\r\n        if (this.xyz.hasEndpoints) {\r\n            state.compilationString += this._declareOutput(this.xyz, state) + ` = ${this.output.associatedVariableName}.xyz;\\r\\n`;\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    protected _dumpPropertiesCode() {\r\n        let codeString = super._dumpPropertiesCode();\r\n        codeString += `${this._codeVariableName}.generateInWorldSpace = ${this.generateInWorldSpace};\\r\\n`;\r\n        codeString += `${this._codeVariableName}.automaticNormalizationNormal = ${this.automaticNormalizationNormal};\\r\\n`;\r\n        codeString += `${this._codeVariableName}.automaticNormalizationTangent = ${this.automaticNormalizationTangent};\\r\\n`;\r\n\r\n        return codeString;\r\n    }\r\n\r\n    public serialize(): any {\r\n        const serializationObject = super.serialize();\r\n\r\n        serializationObject.generateInWorldSpace = this.generateInWorldSpace;\r\n        serializationObject.automaticNormalizationNormal = this.automaticNormalizationNormal;\r\n        serializationObject.automaticNormalizationTangent = this.automaticNormalizationTangent;\r\n\r\n        return serializationObject;\r\n    }\r\n\r\n    public _deserialize(serializationObject: any, scene: Scene, rootUrl: string) {\r\n        super._deserialize(serializationObject, scene, rootUrl);\r\n\r\n        this.generateInWorldSpace = serializationObject.generateInWorldSpace;\r\n        this.automaticNormalizationNormal = serializationObject.automaticNormalizationNormal;\r\n        this.automaticNormalizationTangent = serializationObject.automaticNormalizationTangent;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.HeightToNormalBlock\", HeightToNormalBlock);\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}